{"version":3,"sources":["webpack:///./src/app/shared/buttons/follow-button.component.ts","webpack:///./src/app/shared/buttons/follow-button.component.ngfactory.js.pre-build-optimizer.js","webpack:///./src/app/shared/buttons/follow-button.component.html","webpack:///./src/app/core/index.ts"],"names":["__webpack_require__","d","__webpack_exports__","FollowButtonComponent","_angular_core__WEBPACK_IMPORTED_MODULE_0__","rxjs_operators__WEBPACK_IMPORTED_MODULE_1__","rxjs_operators__WEBPACK_IMPORTED_MODULE_2__","rxjs__WEBPACK_IMPORTED_MODULE_3__","profilesService","router","userService","this","toggle","isSubmitting","prototype","toggleFollowing","_this","isAuthenticated","pipe","Object","authenticated","profile","following","unfollow","username","data","emit","err","follow","navigateByUrl","subscribe","RenderType_FollowButtonComponent","View_FollowButtonComponent_0","_angular_common__WEBPACK_IMPORTED_MODULE_1__","encapsulation","styles","_l","_v","en","$event","ad","component","klass","ngClass","disabled","btn-outline-secondary","btn-secondary","_ck","_co","currVal_1","auth_guard_service"],"mappings":"2FAAAA,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,QAAAK,EAAAL,EAAA,QAAAM,EAAAN,EAAA,QAAAO,EAAAP,EAAA,QAOAG,EAAA,WAKE,SAAAA,EACUK,EACAC,EACAC,GAFAC,KAAAH,kBACAG,KAAAF,SACAE,KAAAD,cAIAC,KAAAC,OAAS,IAAIR,EAAA,EACvBO,KAAAE,cAAe,EAuCjB,OArCEV,EAAAW,UAAAC,gBAAA,eAAAC,EAAAL,KACEA,KAAKE,cAAe,EAGpBF,KAAKD,YAAYO,gBAAgBC,KAAKC,OAAAd,EAAA,EAAAc,CACpC,SAACC,GAEC,OAAKA,EAMAJ,EAAKK,QAAQC,UAYTN,EAAKR,gBAAgBe,SAASP,EAAKK,QAAQG,UACjDN,KAAKC,OAAAb,EAAA,EAAAa,CACJ,SAAAM,GACET,EAAKH,cAAe,EACpBG,EAAKJ,OAAOc,MAAK,IAEnB,SAAAC,GAAO,OAAAX,EAAKH,cAAe,KAjBtBG,EAAKR,gBAAgBoB,OAAOZ,EAAKK,QAAQG,UAC/CN,KAAKC,OAAAb,EAAA,EAAAa,CACJ,SAAAM,GACET,EAAKH,cAAe,EACpBG,EAAKJ,OAAOc,MAAK,IAEnB,SAAAC,GAAO,OAAAX,EAAKH,cAAe,MAZ7BG,EAAKP,OAAOoB,cAAc,UACnBV,OAAAZ,EAAA,EAAAY,CAAG,UA0BbW,aAEP3B,EApDA,sCCPAH,EAAAC,EAAAC,EAAA,sBAAA6B,IAAA/B,EAAAC,EAAAC,EAAA,sBAAA8B,IAAA,IAAA5B,EAAAJ,EAAA,QAAAiC,EAAAjC,EAAA,QAaI+B,GAbJ/B,EAAA,QAAAA,EAAA,QAAAA,EAAA,QAAAA,EAAA,QAauCI,EAAA,GAAQ,CAAE8B,cAAe,EAAGC,OADhC,GACsEV,KAAM,MAExG,SAASO,EAA6BI,GAAM,OAAOhC,EAAA,GAAQ,EAAG,ECfrEgC,MAAAhC,EAAA,+FAAAiC,EAAAC,EAAAC,GAAA,IAAAC,GAAA,QAE0I,UAAAF,IDelIE,GADsC,IChB9CH,EAEsKI,UDc9I1B,mBACFyB,GCjBtBA,GAAA,YAAApC,EAAA,mBAAA6B,EAAA,GAAA7B,EAAA,EAAAA,EAAA,EAAAA,EAAA,EAAAA,EAAA,IAAAsC,MAAA,YAAAC,QAAA,qBACKvC,EAAA,MAAAwC,SAAA,EAAAC,wBAAA,EAAAC,gBAAA,KACoKV,MAAAhC,EAAA,gFAA8BgC,MAAAhC,EAAA,iCAAmF,SAAA2C,EAAAV,GAAA,IAAAW,EAAAX,EAAAI,UADrRQ,EAAAF,EAAAV,EAAA,IAAAW,EAAAnC,cAAAmC,EAAA3B,QAAAC,UAAA0B,EACkI3B,QAAAC,WAFvIyB,EAAAV,EAAA,IAAU,wBACLY,IACkI,SAAAF,EAAAV,GAAA,IAAAW,EAAAX,EAAAI,UAAgEM,EAAAV,EAAA,IAAAW,EAAA3B,QAAAC,UAAA,oBAAA0B,EAAA3B,QAAAG,0JCFvMxB,EAAAC,EAAAC,EAAA,sBAAAgD,EAAA","file":"common.7b68d2a3ad9ee41fa206.js","sourcesContent":["import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Router } from '@angular/router';\n\nimport { Profile, ProfilesService, UserService } from '../../core';\nimport { concatMap ,  tap } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\n@Component({\n  selector: 'app-follow-button',\n  templateUrl: './follow-button.component.html'\n})\nexport class FollowButtonComponent {\n  constructor(\n    private profilesService: ProfilesService,\n    private router: Router,\n    private userService: UserService\n  ) {}\n\n  @Input() profile: Profile;\n  @Output() toggle = new EventEmitter<boolean>();\n  isSubmitting = false;\n\n  toggleFollowing() {\n    this.isSubmitting = true;\n    // TODO: remove nested subscribes, use mergeMap\n\n    this.userService.isAuthenticated.pipe(concatMap(\n      (authenticated) => {\n        // Not authenticated? Push to login screen\n        if (!authenticated) {\n          this.router.navigateByUrl('/login');\n          return of(null);\n        }\n\n        // Follow this profile if we aren't already\n        if (!this.profile.following) {\n          return this.profilesService.follow(this.profile.username)\n          .pipe(tap(\n            data => {\n              this.isSubmitting = false;\n              this.toggle.emit(true);\n            },\n            err => this.isSubmitting = false\n          ));\n\n        // Otherwise, unfollow this profile\n        } else {\n          return this.profilesService.unfollow(this.profile.username)\n          .pipe(tap(\n            data => {\n              this.isSubmitting = false;\n              this.toggle.emit(false);\n            },\n            err => this.isSubmitting = false\n          ));\n        }\n      }\n    )).subscribe();\n  }\n}\n","/**\n * @fileoverview This file was generated by the Angular template compiler. Do not edit.\n *\n * @suppress {suspiciousCode,uselessCode,missingProperties,missingOverride,checkTypes}\n * tslint:disable\n */ \nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"./follow-button.component\";\nimport * as i3 from \"../../core/services/profiles.service\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"../../core/services/user.service\";\nvar styles_FollowButtonComponent = [];\nvar RenderType_FollowButtonComponent = i0.ɵcrt({ encapsulation: 2, styles: styles_FollowButtonComponent, data: {} });\nexport { RenderType_FollowButtonComponent as RenderType_FollowButtonComponent };\nexport function View_FollowButtonComponent_0(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 4, \"button\", [[\"class\", \"btn btn-sm action-btn\"]], null, [[null, \"click\"]], function (_v, en, $event) { var ad = true; var _co = _v.component; if ((\"click\" === en)) {\n        var pd_0 = (_co.toggleFollowing() !== false);\n        ad = (pd_0 && ad);\n    } return ad; }, null, null)), i0.ɵdid(1, 278528, null, 0, i1.NgClass, [i0.IterableDiffers, i0.KeyValueDiffers, i0.ElementRef, i0.Renderer2], { klass: [0, \"klass\"], ngClass: [1, \"ngClass\"] }, null), i0.ɵpod(2, { \"disabled\": 0, \"btn-outline-secondary\": 1, \"btn-secondary\": 2 }), (_l()(), i0.ɵeld(3, 0, null, null, 0, \"i\", [[\"class\", \"ion-plus-round\"]], null, null, null, null, null)), (_l()(), i0.ɵted(4, null, [\" \\u00A0 \", \" \", \"\\n\"]))], function (_ck, _v) { var _co = _v.component; var currVal_0 = \"btn btn-sm action-btn\"; var currVal_1 = _ck(_v, 2, 0, _co.isSubmitting, !_co.profile.following, _co.profile.following); _ck(_v, 1, 0, currVal_0, currVal_1); }, function (_ck, _v) { var _co = _v.component; var currVal_2 = (_co.profile.following ? \"Unfollow\" : \"Follow\"); var currVal_3 = _co.profile.username; _ck(_v, 4, 0, currVal_2, currVal_3); }); }\nexport function View_FollowButtonComponent_Host_0(_l) { return i0.ɵvid(0, [(_l()(), i0.ɵeld(0, 0, null, null, 1, \"app-follow-button\", [], null, null, null, View_FollowButtonComponent_0, RenderType_FollowButtonComponent)), i0.ɵdid(1, 49152, null, 0, i2.FollowButtonComponent, [i3.ProfilesService, i4.Router, i5.UserService], null, null)], null, null); }\nvar FollowButtonComponentNgFactory = i0.ɵccf(\"app-follow-button\", i2.FollowButtonComponent, View_FollowButtonComponent_Host_0, { profile: \"profile\" }, { toggle: \"toggle\" }, []);\nexport { FollowButtonComponentNgFactory as FollowButtonComponentNgFactory };\n","<button\n  class=\"btn btn-sm action-btn\"\n  [ngClass]=\"{ 'disabled': isSubmitting,\n               'btn-outline-secondary': !profile.following,\n               'btn-secondary': profile.following }\"\n  (click)=\"toggleFollowing()\">\n  <i class=\"ion-plus-round\"></i>\n  &nbsp;\n  {{ profile.following ? 'Unfollow' : 'Follow' }} {{ profile.username }}\n</button>\n","export * from './core.module';\nexport * from './services';\nexport * from './models';\nexport * from './interceptors';\n"],"sourceRoot":""}